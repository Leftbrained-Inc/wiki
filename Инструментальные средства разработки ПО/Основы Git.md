# Основы Git

> :book: **Git** — мощная и сложная распределенная система контроля версий. Её разработал в 2005 году Линус Торвальдс[^1], чтобы другие разработчики могли вносить свой вклад в ядро Linux. 
> 
> Git это про скорость, простой и функциональный дизайн, а ещё поддержка нелинейной разработки, полная децентрализация, возможность эффективно работать с большими проектами.

## Плюсы

- **Полностью бесплатный, `open-source`**. (чего еще можно желать?)
- **Небольшой и быстрый**. Выполняет все операции локально, что увеличивает его скорость. А ещё Git локально сохраняет весь репозиторий в небольшой файл без потери качества данных.
- **Резервное копирование**. Git эффективен в хранении бэкапов, поэтому известно мало случаев, когда кто-то терял данные при использовании Git.
- **Простое ветвление**. В других системах контроля версий создание веток - утомительная задача, потому что весь код копируется в новую ветку.

## Как сделать

1. Запустить установочный файл (https://gitforwindows.org)
2. Ознакомиться с лицензионным соглашением
3. Выбрать компоненты, которые следует установить
4. Указать способ использования Git
5. Настройка правил окончания строки[^2]
6. Выбор эмулятора терминала для Git Bash[^3]
7. Настройка дополнительных параметров
8. Завершение установки

## Уровни настроек

Всего есть три уровня: 

- на уровне системы;
- на уровне пользователя;
- на уровне проекта (репозитория).

Изменить такие настройки можно либо через **командную строку**, либо непосредственно в самом **конфиге**.

## Шорткаты

1. Кто будет делать коммиты:

```bash
git config --global user.name "Your Name"
git config --global user.email your_email@whatever.com
```

2. Задаем окончания строк:

```bash
git config --global core autocrif true
git config --global core. safecrif warn
```

3. Отображение юникода:

```bash
git config --global core.quotepath off # чтобы избежать нечитаемых строк
```

4. В каком редакторе будем изменять код:

```bash
git config --global core. editor "notepad.exe"
```

## Архитектура

<figure>
  <img src='https://user-images.githubusercontent.com/74786850/234913281-088340e9-5498-4dfc-a620-2148f27188b9.png'>
  <figcaption align='center'>Архитектура Git</figcaption>
</figure>

<br><br>

> :warning: `stage` добавляет гибкости в процесс разработки, можно изменить большое количество файлов, но отправить их в репозиторий в **разных коммитах** со своими специфическими комментариями

## Создаем репозиторий

```bash
mkdir Desktop/git_exercise
cd Desktop/git_exercise/
git init
```

`git init` - главная команда здесь, она инициализирует новый репо в текущей папке.

А вот еще небольшой список полезных команд для начала:

- `git status` - текущее состояние головы репо: изменилось ли что-то, сколько файлов отслеживается и прочая статистика;
- `git add` - добавляем файлы в следующий коммит (`HEAD`, `stage`), можно добавить параметр `-A` и добавить все файлы автоматически;
- `git commit` - непосредственно коммит (то есть фиксация изменений), вдогонку параметр `-m` для задания сообщения к коммиту (обычно это ченджлог);
- `git log` - смотрим всю историю коммитов, полезно для анализа развития проекта и просто поглядеть;
- `git reset` - отмена коммита, можно указать `HEAD` и отменится **последний** коммит;
- `git pull` - получить все изменения с ремоута.
- `git push` - отправить все локальные изменения на ремоут
- `git remote add` - так можно добавить удаленный репозиторий (задается ссылкой)

#### :bulb: Ремоут (remote) или же удаленный репозиторий - как бы база проекта, там собираются все изменения с локальных репо, именно так и работают в команде.

Ремоут может находиться где угодно, но в основном это `GitHub` или `GitLab` и прочие онлайн-сервисы.

> :warning: Не путаем GitHub и Git - один это сервис для хранения репо и вообще социальная сеть для разработчиков, а второй - система контроля версий.

## Коды файлов

В Git'е у каждого типа файла есть свой код - так их можно различать, вот они слева направо:

- `040000` — Директория (дерево каталога)
- `100644` — Обычный неисполняемый файл
- `100755` — Обычный исполняемый файл
- `120000` - Символическая ссылка
- `160000` — Gitlink (ссылка на коммит подмодуля)

# Ещё параметры

### Полезные опции команды git commit

`-F, --file [file]` — записать сообщение коммита из указанного файла

`--author [author]` — подменить автора коммита

`--date [date]` — подменить дату коммита

`-m, --message [message]` — сообщение коммита

`-a, --all` — закоммитить все изменения в файлах

`-i, --include [files]` — добавить в индекс (stage) указанные файлы для следующего коммита

`o, --only [files]` — закоммитить только указанные файлы

`--amend` — перезаписать предыдущий коммит

### Ветки и прочие замысловатые штуки

Если есть удаленный репо, а вот локального нет, то его можно склонировать командой `git clone` со ссылкой. Папка со всеми файлами репозитория добавится внутрь текущей директории.

Создание еще одной **ветки**, кроме основной **master или main**, выполняется командой 
`git branch <name>` (`git branch` без параметров показывает имеющиеся ветки, отмечая звездочкой активную). Для переключения на другую ветку следует воспользоваться командой `checkout`, она принимает один параметр — имя ветки, на которую надо переключиться.

Чтобы соединить две ветки в одну, пользуются командой `git merge` плюс название ветки, с которой соединяем активную.

Если нужно откатиться к конкретному коммиту, сделать это можно по его хешу - такие добавляются автоматически каждому коммиту. 
Посмотреть их можно на хостинге или через `git log`: обычно это беспорядочный набор знаков, но можно не писать его полностью - хватит первых 6 символов.
Используем команду `git revert [хеш]`.

### Настройка .gitignore

В большинстве проектов есть файлы или целые директории, которые не требуется коммитить. Для их исключения используется файл `.gitignore`.

1. Создайте вручную файл под названием `.gitignore` и сохраните его в директорию проекта;
2. Внутри файла перечислите названия всех файлов/папок, которые нужно игнорировать, каждый с новой строки;
3. Файл `.gitignore` должен быть добавлен, закоммичен и отправлен на сервер, как любой другой файл в проекте.

#### Примеры файлов, которые нужно игнорировать:

- Логи
- Артефакты систем сборки
- Папки `node_modules` в проектах node.js
- Папки, созданные IDE, например Netbeans или IntelliJ
- Разнообразные заметки разработчика

[^1]: Очень крутой чувак, а еще он сделал Linux 🐧
[^2]: Параметр позволяет настроить то, как GIT будет обрабатывать концы строк в файлах - полезно 👍
[^3]: Можно выбрать Windows или Unix эмулятор в зависимости от того, с каким терминалом удобнее работать.
